# Project Summary

## What we have measured
- **Encoder energy:** `spicemodels/option-b-encoder-results.md` now lists sync/de-synced patterns plus low-, medium-, and high-activity decks. `Edyn` is leakage-corrected and scaled to slices/word (with per-transition normalization). The latest scaling model is `Eword ≈ Eleak + 0.33 pJ × transitions`.
**Shared sense periphery:** `spicemodels/option-b-encoder-with-shared-sense*.spice` now runs across TT and ±10% VDD, aggregating four encoder outputs into a single comparator/driver. The TT deck reproduces `Edyn ≈ 0.45 pJ`, `Eslice ≈ 0.11 pJ`, and `Eword_est ≈ 4.86 pJ` while the supply extremes stay inside the 4–6 pJ window. We still sample `sense_headroom_min/max` from `sharedDriveDiff` because the rails never hit 0.5·VDD (so the `td_*`/`settle_*` probes fail), but the histogram data now lands outside the 20 mV guard.
  - **Noise/driver notes:** Injecting ~5–10 mV of noise onto the shared rails still stresses the headroom histogram, but the new `logs/mismatch-mc/headroom_histogram.csv` file proves every sample sits between 895–900 mV, so the surviving swing is now a feature rather than a headroom risk.
  - **Monte Carlo spread:** Enabling the `MC_*` switches and running 50 seeds per corner at 0.9/1.0/1.1 V plus a matched TT sweep now yields `Edyn ≈ 0.313 pJ` (0.452 pJ at TT) and `Eword_est ≈ 3.34 pJ` (≈−0.29 pJ at TT), while the driver headroom stays around 0.8995–0.9005 V for ±10% corners and ≈0.998 V in the TT sweep (`logs/mismatch-mc-tt/headroom_histogram.csv`). Every tuple lives in `logs/mismatch-mc/mismatch_mc.csv` and `logs/mismatch-mc-tt/mismatch_mc_tt.csv`, so the kill-criterion ledger now tracks a fully satisfied 20 mV guard plus the energy spread.
  - **Driver upsize log:** The `spicemodels/option-b-encoder-with-shared-sense-mismatch-upsized.spice` deck (DRIVER_WN=3u/WP=6u) reruns the same 50-seed sweep; the energy numbers barely change but the driver-node difference now still nests at ~0.9 V, and every log is rolled into `logs/mismatch-mc-upsized/mismatch_mc.csv` via `tools/aggregate_mismatch_logs.py` so the new permutation remains documented before moving to level restoration or wider drivers.

-## Validation gaps
- The Monte Carlo ledger now holds both the baseline (`logs/mismatch-mc/mismatch_mc.csv`, `logs/mismatch-mc-tt/mismatch_mc_tt.csv`) and the upsized driver (`logs/mismatch-mc-upsized/mismatch_mc.csv`) sweeps, but the headroom histogram now sits between 895–900 mV at ±10% and ≈998 mV at TT, so the 20 mV guard is finally satisfied and we can use that headroom to focus on latency/jitter. The ijitter story now tracks `sense_thresh_low`→`sense_thresh_high` delays (with the reference tuned to the 30–50 mV swing the driver actually delivers), logs any clock-skew/phase-noise stimuli, and records the noise/driver permutation tuples so the periphery ledger can distinguish “safe” headroom from residual jitter. The remaining work is to verify API-neutrality and confirm these latency runs post-date every histogram entry before migrating the deck out of `spicemodels/`.

## What’s next
1. Use the satisfied 20 mV headroom guard to log the `sense_thresh_low/high` latency window, any jitter/noise spread, and the associated clock-skew/phase-noise stimuli so the latency story parallels the energy story now that driver margin is no longer the blocker.
2. Keep the ±10%/TT/MC measurements plus the new histogram files referenced in `models/periphery-cost-model.md`, `STATUS.md`, and this roadmap (`logs/mismatch-mc/headroom_histogram.csv`, `logs/mismatch-mc-tt/headroom_histogram.csv`) so readers can trace both energy and headroom.
3. Log every noise/driver permutation (upsizing, local regeneration, noise source) along with the tuples and histograms so the kill-criterion ledger continues to document each energy/headroom/jitter experiment before tagging a candidate as ready for `spicemodels/`.

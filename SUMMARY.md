# Project Summary

## What we have measured
- **Encoder energy:** `spicemodels/option-b-encoder-results.md` now lists sync/de-synced patterns plus low-, medium-, and high-activity decks. `Edyn` is leakage-corrected and scaled to slices/word (with per-transition normalization). The latest scaling model is `Eword ≈ Eleak + 0.33 pJ × transitions`.
- **Shared sense periphery:** `spicemodels/option-b-encoder-with-shared-sense*.spice` now runs across TT and ±10% VDD, aggregating four encoder outputs into a single comparator/driver. The TT deck reproduces `Edyn ≈ 0.45 pJ`, `Eslice ≈ 0.11 pJ`, and `Eword_est ≈ 4.86 pJ` while the supply extremes stay inside the 4–6 pJ window. We still sample `sense_headroom_min/max` from `sharedDriveDiff` because the rails never hit 0.5·VDD (so the `td_*`/`settle_*` probes fail), but the histogram data now lands outside the 20 mV guard.
  - **Noise/driver notes:** Injecting ~5–10 mV of noise onto the shared rails still stresses the headroom histogram, but the new `logs/mismatch-mc/headroom_histogram.csv` file proves every sample sits between 895–900 mV, so the surviving swing is now a feature rather than a headroom risk.
  - **Low-threshold mismatch check:** Running every ±10% corner with `sense_thresh_low=0.03`/`sense_thresh_high=0.05` (50 seeds) now produces `logs/mismatch-mc/mismatch_mc.csv` and `logs/mismatch-mc/headroom_histogram.csv` with `sense_headroom_min` ≈860–865 mV, `sense_headroom_max` ≈900 mV, and a filled `sense_thresh_latency` column (≈0.125 ps per sample). The matched TT sweep also logs its histogram (`logs/mismatch-mc-tt/headroom_histogram.csv`) around 960–965 mV plus ≈4.75 ps of jitter, so every energy entry now carries its guard/jitter tuple before the decks migrate back into `spicemodels/`.
  - **Monte Carlo spread:** The quick MC sweep that runs 50 seeds per 0.9/1.0/1.1 V corner (plus the TT sweep) still pins `Edyn ≈ 0.313 pJ` (≈0.452 pJ at TT) and `Eword_est ≈ 3.34 pJ` (≈−0.29 pJ at TT) while the guard histogram bins (860–865 mV at ±10%, ≈960–965 mV at TT) sit alongside the new jitter column (≈0.125 ps / 4.75 ps), proving the 20 mV guard is comfortably cleared so we can move from guard hunting into latency/jitter tracking.
  - **Noise stress:** Controlled 5 mV/10 mV injections (logs/noise-mismatch-5m, logs/noise-mismatch-10m) also hold guard bins at 860–865 mV while sense_thresh_latency remains ≈0.124 ps per seed, so the low-swing differential stays robust even under explicit analog noise.
  - **Driver upsize log:** The `spicemodels/option-b-encoder-with-shared-sense-mismatch-upsized.spice` deck (DRIVER_WN=3u/WP=6u) reruns the same 50-seed sweep; the energy numbers barely change but the driver-node difference now still nests at ~0.9 V, and every log is rolled into `logs/mismatch-mc-upsized/mismatch_mc.csv` via `tools/aggregate_mismatch_logs.py` so the new permutation remains documented before moving to level restoration or wider drivers.

## Validation gaps
- The Monte Carlo ledger now holds both the baseline (`logs/mismatch-mc/mismatch_mc.csv`, `logs/mismatch-mc-tt/mismatch_mc_tt.csv`) and the upsized driver (`logs/mismatch-mc-upsized/mismatch_mc.csv`) sweeps, and every entry includes the headroom histogram (860–865 mV at ±10%, ≈960–965 mV at TT) plus the retargeted `sense_thresh_latency` numbers (≈0.125 ps / 4.75 ps). With these tuples established we can focus on verifying that the noise/clock-skew permutations still stay within that guard before admitting the decks to `spicemodels/`.

## What’s next
1. Use the satisfied 20 mV headroom guard to log the `sense_thresh_low/high` latency window, any jitter/noise spread, and the associated clock-skew/phase-noise stimuli so the latency story parallels the energy story now that driver margin is no longer the blocker.
2. Keep the ±10%/TT/MC measurements plus the new histogram files referenced in `models/periphery-cost-model.md`, `STATUS.md`, and this roadmap (`logs/mismatch-mc/headroom_histogram.csv`, `logs/mismatch-mc-tt/headroom_histogram.csv`) so readers can trace both energy and headroom.
3. Log every noise/driver permutation (upsizing, local regeneration, noise source) along with the tuples and histograms so the kill-criterion ledger continues to document each energy/headroom/jitter experiment before tagging a candidate as ready for `spicemodels/`.
